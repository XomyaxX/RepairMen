<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Admin - –ó–∞—è–≤–∫–∏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
    
    <div class="container">
        <h1>–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–º–æ–Ω—Ç</h1>
        <div id="requests-list"></div>
        <button class="button" onclick="clearRequests()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏</button>
        <button class="button" onclick="exportRequests()">–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON</button>
    </div>

    <script src="script.js"></script>
    <script>
        function loadRequests() {
            const requests = JSON.parse(localStorage.getItem('repair_requests') || '[]');
            const container = document.getElementById('requests-list');
            
            if (requests.length === 0) {
                container.innerHTML = '<p>–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫</p>';
                return;
            }
            
            container.innerHTML = requests.map((request, index) => `
                <div class="request-card" style="background: var(--card-bg); padding: 20px; margin: 10px 0; border-radius: 10px;">
                    <h3>–ó–∞—è–≤–∫–∞ #${index + 1}</h3>
                    <p><strong>–§–ò–û:</strong> ${request.fio}</p>
                    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${request.phone}</p>
                    <p><strong>–¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏:</strong> ${request.type}</p>
                    <p><strong>–ú–æ–¥–µ–ª—å:</strong> ${request.model}</p>
                    <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> ${request.problem}</p>
                    <p><strong>–ê–¥—Ä–µ—Å:</strong> ${request.city}, ${request.street}, ${request.house}</p>
                    <p><strong>–í—Ä–µ–º—è:</strong> ${new Date(request.timestamp).toLocaleString()}</p>
                </div>
            `).join('');
        }
        
        function clearRequests() {
            if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏?')) {
                localStorage.removeItem('repair_requests');
                loadRequests();
            }
        }
        
        function exportRequests() {
            const requests = JSON.parse(localStorage.getItem('repair_requests') || '[]');
            const dataStr = JSON.stringify(requests, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'repair_requests.json';
            link.click();
        }
        
        document.addEventListener('DOMContentLoaded', loadRequests);
    </script>
</body>
</html>